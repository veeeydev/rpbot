const interpreter = require("../interpreter")

module.exports = async (client, server, old) => {
    if(!client.music_start_commands.size) client.music_start_commands.set(Math.floor(Math.random() * 12319023912, {channel:server.text.id, code:`Now Playing $songInfo[title]`}))

    for (const command of client.music_start_commands.array()) {
        
        const data = {
      author: undefined, 
      member: undefined, 
      channel: server.text,
      guild: server.text.guild
    } //support 

    const id = await interpreter(client, data, [], {
channel:command.channel,
code:command.channel
}, undefined, true)

const channel = client.channels.cache.get(`${id}`)
    

    if (!channel) return console.error(`channel with ID ${id} does not exist`)
    
    data.channel = channel
    await interpreter(client, data, [], command, undefined)
     
    server.songs[0]["message"] = channel.messages.cache.last()

    
        
    }
}