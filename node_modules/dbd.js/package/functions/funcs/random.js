const random = async d => {

    const code = d.command.code

    const r = code.split("$random[").length - 1

    const inside = code.split("$random[")[r].split("]")[0]

    const [ n1, n2, allow = "no"] = inside.split(";")

if (inside.split(";").length > 3) return d.error(`❌ Too many fields in \`$random[${inside}]\``)
    if (isNaN(Number(n1)) || isNaN(Number(n2)) || Number(n1) >= Number(n2)) return d.error(`:x: Invalid number in \`$random[${inside}]\``)

    let n = allow === "yes" ? Math.random() * (Number(n2) - Number(n1)) + Number(n1): Math.floor(Math.random() * (Number(n2) - Number(n1))) + Number(n1)

    if (d.randoms[inside]) n = d.randoms[inside]
    else d.randoms[inside] = n

    return {
        code: code.replaceLast(`$random[${inside}]`, n),
        randoms: d.randoms
    }
}

module.exports = random