const embed = require("../../handlers/errors.js")

module.exports = async d => {
    const code = d.command.code
    
    const r = code.split("$onlyForChannels[").length - 1
    
    const inside = code.split("$onlyForChannels[")[r].split("]")[0]
    
    const fields = inside.split(";")
    
    const error = fields.pop()
    
    const ids = fields 
    
    if (!ids.includes(d.message.channel.id)) return embed(d, error)
        
    return {
        code: code.replaceLast(`$onlyForChannels[${inside}]`, "")
    }
}  