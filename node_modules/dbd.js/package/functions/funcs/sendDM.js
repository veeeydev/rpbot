const embed = require("../../handlers/errors")

module.exports = async d => {
    const code = d.command.code

    const r = code.split("$sendDM[").length - 1

    const inside = code.split("$sendDM[")[r].split("]")[0]

    let [
        userID,
         ...msg
    ] = inside.split(";")
    
    msg = msg.join(";")
    
    const user = await d.client.users.fetch(userID).catch(err => {})

    if (!user) return d.error(`:x: Invalid user ID in \`$sendDM[${inside}]\``)

    const options = await embed(d, msg, true)

    await user.send(options.message || undefined, options.embed || undefined).catch(err => {})
    
    return {
        code: code.replaceLast(`$sendDM[${inside}]`, "")
    }
}// it works?