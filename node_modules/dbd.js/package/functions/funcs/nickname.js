const nickname  = async d => {
  
  let code = d.command.code
  
  const r = code.split("$nickname").length - 1
  
  const after = code.split("$nickname")[r]
  
  if (after.startsWith("[")) {
    const inside = after.split("[")[1].split("]")[0]
    
    const member = await d.message.guild.members.fetch(inside).catch(err => {})
    
    if (!member)  return d.error(`‚ùå Invalid user ID in \`$nickname[${inside}]\``)
    
    code = code.replaceLast(`$nickname[${inside}]`, member.displayName.deleteBrackets())
  } else {
    code = code.replaceLast("$nickname", d.message.member.displayName.deleteBrackets())
  }
  
  return {
    code: code 
  } 
} 

module.exports =nickname 