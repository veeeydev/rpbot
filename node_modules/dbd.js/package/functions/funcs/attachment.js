const Discord = require("discord.js")

module.exports = async d => {
    const code = d.command.code
    
    const inside = code.split("$attachment[")[1].split("]")[0] 
    
    const [url, name = "image.webp" ] = inside.split(";") 
    
    const attachment = new Discord.MessageAttachment(url.addBrackets(), name.addBrackets())

    return {
        code: code.replaceLast(`$attachment[${code.split("$attachment[")[1].split("]")[0]}]`, ""),
        attachment: attachment
    }
}