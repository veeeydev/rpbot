module.exports = async d => {
  const code = d.command.code
  
  const r = code.split("$activity").length - 1
  
  const after = code.split("$activity")[r]
  
  if (after.startsWith("[")) {
   const id = after.split("[")[1].split("]")[0]
    
    const u = await d.client.users.fetch(id).catch(err => {})
    
    if (!u) return d.error(`❌ Invalid user ID in \`$activity[${id}]\``)
    
    if (!u.presence.activities) return d.error(`❌ No activities for \`$activity[${id}]\``)
    
    return {
      code: code.replaceLast(`$activity[${id}]`, u.presence.activities.join(", ").deleteBrackets() || "none") 
    } 
  } else {
    return {
      code: code.replaceLast(`$activity`, d.message.author.presence.activities.join(", ").deleteBrackets() || "none") 
    } 
  } 
} 