module.exports = async d => {
    const code = d.command.code

    const r = code.split("$volume").length - 1

    const after = code.split("$volume")[r]

    const server = d.client.servers.get(d.message.guild.id)

    if (!server) return d.error(`:x: Nothing is being played`)

    if (after[0] === "[") {
      const inside = after.slice(1).split("]")[0]

    const n = Number(inside)

    if (!n) return d.error(`:x: Invalid number in \`$volume[${inside}]\``)

    server.connection.dispatcher.setVolume(n / 100)
    server.volume = n

    d.client.servers.set(d.message.guild.id, server)

    return {
        code: code.replaceLast(`$volume[${inside}]`, "")
    }
    } else {
      return {
        code: code.replaceLast(`$volume`, server.volume)
    }
    }
}