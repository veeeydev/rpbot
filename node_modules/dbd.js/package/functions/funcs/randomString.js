const chars = require("../../utils/characters.js")

module.exports= async d => {
    const code = d.command.code

    const r = code.split("$randomString[").length - 1

    const inside = code.split("$randomString[")[r].split("]")[0]

    const length = Number(inside)

    if (!length) return d.error(`:x: Invalid number in \`$randomString[${inside}]\``)
    
    const result = []

    for (let i = 0;i < length;i++) {
        result.push(chars[Math.floor(Math.random() * chars.length)])
    }
    
    return {
        code: code.replaceLast(`$randomString[${inside}]`, result.join(""))
    }
}