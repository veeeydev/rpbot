module.exports = async d => {
    const code = d.command.code

    const r = code.split("$channelNSFW").length - 1

    const after = code.split("$channelNSFW")[r]

    if (after.startsWith("[")) {
        const id = after.slice(1).split("]")[0]

        const channel = d.message.guild.channels.cache.get(id)

        if (!channel) return d.error(`:x: Invalid channel ID \`$channelNSFW[${id}]\``)

        return {
            code: code.replaceLast(`$channelNSFW[${id}]`, channel.nsfw)
        }
    } else {
        return {
            code: code.replaceLast(`$channelNSFW`, d.message.channel.nsfw)
        }
    }
}