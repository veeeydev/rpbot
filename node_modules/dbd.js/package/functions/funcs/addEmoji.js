module.exports = async d => {
    const code = d.command.code

    const r = code.split("$addEmoji[").length - 1

    const inside = code.split("$addEmoji[")[r].split("]")[0]

    const options = [
        url, 
        name,
        returnEmoji = "no", 
        ...roleIDs
    ] = inside.split(";")

    const emoji = await d.message.guild.emojis.create(url.addBrackets(), name.addBrackets(), roleIDs.length ? {
        roles: roleIDs
    } : undefined).catch(err => {})

    if (!emoji) return d.error(`:x: Failed to create emoji! url: ${url}, name: ${name} `)

    return {
        code: code.replaceLast(`$addEmoji[${inside}]`, returnEmoji === "yes" ? emoji.toString() : "")
    }
}