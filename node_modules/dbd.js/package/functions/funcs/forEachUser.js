module.exports = async d => {
    const code = d.command.code
    
    const r = code.split("$forEachUser").length - 1
    
    const inside = code.split("$forEachUser[")[r].split("]")[0]
    
    for (const user of d.client.users.cache.array()) {
        for (const command of inside.split(";")) {
            
            const m = {...d.message}
            
            m.author = user 
            
            const cmd = d.client.awaited_commands.find(e => e.name === command)
            
            if (!cmd) return d.error(`‚ùå Invalid awaited command ${command} in \`$forEachGuild[${inside}]\``)
                
            d.interpreter(d.client, m, d.args, cmd)
        }
    }
    
    return {
        code: code.replaceLast(`$forEachUser[${inside}]`, "")
    }
}  