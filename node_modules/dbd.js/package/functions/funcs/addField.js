module.exports = async d => {

    let code = d.command.code 

    const r = code.split("$addField").length - 1

    const inside = code.split("$addField[")[r].split("]")[0]

    const [ title, value, inline = "no" ] = inside.split(";")

    if (!value) return d.error(`:x: Fields can't be empty in \`$addField[${inside}]\``)
    
    d.embed.addField(title.addBrackets(), value.addBrackets(), inline === "yes")

    code = code.replaceLast(`$addField[${inside}]`, "")
    return {
        code: code,
        embed: d.embed
    }
}
